ë„¤íŠ¸ì›Œí¬ ê¸°ë°˜ ì„¤ë¬¸ì¡°ì‚¬ ë° íˆ¬í‘œ ì‹œìŠ¤í…œ (Cì–¸ì–´)
ë³¸ ë¬¸ì„œëŠ” Cì–¸ì–´ ë° TCP/IP ì†Œì¼“ APIë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„ëœ ì½˜ì†” í™˜ê²½ì˜ ì„¤ë¬¸ì¡°ì‚¬ ë° íˆ¬í‘œ ì‹œìŠ¤í…œì— ëŒ€í•œ ê¸°ìˆ  ëª…ì„¸ì„œìž…ë‹ˆë‹¤. ë³¸ ì‹œìŠ¤í…œì˜ í•µì‹¬ ì•„í‚¤í…ì²˜ëŠ” ë‹¤ì¤‘ í´ë¼ì´ì–¸íŠ¸ì˜ ë™ì‹œ ì ‘ì† ë° ìƒí˜¸ìž‘ìš©ì„ ì§€ì›í•˜ê¸° ìœ„í•œ ë©€í‹°ìŠ¤ë ˆë”©ì´ë©°, ë°ì´í„° ê´€ë¦¬ì˜ ì•ˆì •ì„±ê³¼ ì‚¬ìš©ìž ì¤‘ì‹¬ì˜ ê¸°ëŠ¥ ì œê³µì„ í•µì‹¬ ëª©í‘œë¡œ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.

ðŸ“‹ í•µì‹¬ ê¸°ëŠ¥
ì‹¤ì‹œê°„ ì„¤ë¬¸ ë° íˆ¬í‘œ ìƒì„±ê³¼ ì°¸ì—¬ ê¸°ëŠ¥: ì‚¬ìš©ìžëŠ” ì‹œìŠ¤í…œì„ í†µí•´ ì„¤ë¬¸ ë˜ëŠ” íˆ¬í‘œ í•­ëª©ì„ ë™ì ìœ¼ë¡œ ìƒì„±í•  ìˆ˜ ìžˆìœ¼ë©°, íƒ€ ì‚¬ìš©ìžëŠ” í•´ë‹¹ í•­ëª©ì— ì‹¤ì‹œê°„ìœ¼ë¡œ ì°¸ì—¬í•˜ì—¬ ìžì‹ ì˜ ì˜ê²¬ì„ ê¸°ë¡í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

ë©€í‹°ìŠ¤ë ˆë”©ì„ í†µí•œ ë‹¤ì¤‘ ì‚¬ìš©ìž ë™ì‹œ ì ‘ì† ì§€ì›: POSIX ìŠ¤ë ˆë“œ(pthread) ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë©€í‹°ìŠ¤ë ˆë“œ ì„œë²„ë¥¼ êµ¬ì¶•í•˜ì—¬, ë‹¤ìˆ˜ì˜ í´ë¼ì´ì–¸íŠ¸ê°€ ë™ì‹œì— ì ‘ì†í•˜ì—¬ ìš”ì²­ì„ ì „ì†¡í•˜ë”ë¼ë„ ì•ˆì •ì ì¸ ë³‘ë ¬ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.

íŒŒì¼ ì‹œìŠ¤í…œ ê¸°ë°˜ì˜ ë°ì´í„° ì˜ì†ì„± ë³´ìž¥: ìƒì„±ëœ ëª¨ë“  ì„¤ë¬¸ ë° íˆ¬í‘œ í•­ëª©ì˜ ë©”íƒ€ë°ì´í„°, ì‘ë‹µ ê²°ê³¼, ì°¸ì—¬ìž ì •ë³´ëŠ” ì„œë²„ì˜ ë¡œì»¬ íŒŒì¼ ì‹œìŠ¤í…œ ë‚´ í…ìŠ¤íŠ¸ íŒŒì¼ì— ì˜êµ¬ì ìœ¼ë¡œ ê¸°ë¡ë©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì„œë²„ í”„ë¡œì„¸ìŠ¤ê°€ ìž¬ì‹œìž‘ë˜ë”ë¼ë„ ëª¨ë“  ë°ì´í„°ê°€ ì¼ê´€ì„± ìžˆê²Œ ë³µì›ë©ë‹ˆë‹¤.

ì œëª© ê¸°ë°˜ì˜ ì‚¬ìš©ìž ì¹œí™”ì  ID ìžë™ ìƒì„±: survey-001ê³¼ ê°™ì€ ê¸°ê³„ì  ì‹ë³„ìž ëŒ€ì‹ , ì‚¬ìš©ìžê°€ ìž…ë ¥í•œ ì œëª©ì„ ê¸°ë°˜ìœ¼ë¡œ ì¸ê°„ì´ ì¸ì§€í•˜ê¸° ìš©ì´í•œ(Human-readable) IDë¥¼ ë™ì ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤.

í•­ëª©ë³„ ìƒíƒœ ê´€ë¦¬ ê¸°ëŠ¥: ê° ì„¤ë¬¸ ë° íˆ¬í‘œ í•­ëª©ì€ 'ì§„í–‰ì¤‘(Active)'ê³¼ 'ì¢…ë£Œ(Closed)'ë¼ëŠ” ëª…ì‹œì ì¸ ìƒíƒœë¥¼ ê°€ì§€ë©°, ê´€ë¦¬ìžëŠ” íŠ¹ì • í•­ëª©ì˜ ì°¸ì—¬ë¥¼ ë¹„í™œì„±í™”í•˜ì—¬ ë§ˆê° ì²˜ë¦¬í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

ì‚¬ìš©ìž ì´ë¦„ ê¸°ë°˜ì˜ ì¤‘ë³µ ì°¸ì—¬ ë°©ì§€ ë©”ì»¤ë‹ˆì¦˜: ê° í´ë¼ì´ì–¸íŠ¸ëŠ” ê³ ìœ í•œ ì‚¬ìš©ìž ì´ë¦„ìœ¼ë¡œ ì‹ë³„ë˜ë©°, ì„œë²„ëŠ” ê° í•­ëª©ì— ëŒ€í•œ ì°¸ì—¬ìž ëª…ë‹¨ì„ ê¸°ë¡í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë™ì¼ ì‚¬ìš©ìžì˜ ì¤‘ë³µ ì‘ë‹µì„ ì›ì²œì ìœ¼ë¡œ ì°¨ë‹¨í•˜ì—¬ ë°ì´í„°ì˜ ì‹ ë¢°ë„ë¥¼ í™•ë³´í•©ë‹ˆë‹¤.

ðŸ”§ ê¸°ìˆ ì  íŠ¹ì§• ìƒì„¸
ë³¸ í”„ë¡œì íŠ¸ëŠ” ë‹¨ìˆœí•œ ê¸°ëŠ¥ êµ¬í˜„ì„ ë„˜ì–´ ì‹œìŠ¤í…œì˜ ì•ˆì •ì„±ê³¼ í™•ìž¥ì„±ì„ í™•ë³´í•˜ê¸° ìœ„í•´, ë‹¤ìŒê³¼ ê°™ì€ ì»´í“¨í„° ê³µí•™ì  ì›ë¦¬ë“¤ì„ ì ìš©í•˜ì—¬ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.

1. ë©€í‹°ìŠ¤ë ˆë”©ê³¼ ë™ê¸°í™” (Concurrency & Synchronization)
ë…ë¦½ì ì¸ ìš”ì²­ ì²˜ë¦¬ ëª¨ë¸: Main ìŠ¤ë ˆë“œëŠ” accept()ë¥¼ í†µí•´ ë¸”ë¡œí‚¹ ìƒíƒœë¡œ í´ë¼ì´ì–¸íŠ¸ì˜ ì—°ê²°ì„ ëŒ€ê¸°í•˜ë©°, ì—°ê²° ìˆ˜ë¦½ ì‹œ ì¦‰ì‹œ pthread_create()ë¥¼ í˜¸ì¶œí•˜ì—¬ í•´ë‹¹ í´ë¼ì´ì–¸íŠ¸ì™€ì˜ í†µì‹ ì„ ìœ„í•œ Worker ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì´ "One-Thread-Per-Client" ëª¨ë¸ì€ ê° í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì´ ë…ë¦½ëœ ì‹¤í–‰ íë¦„(Thread of execution) ë‚´ì—ì„œ ì²˜ë¦¬ë˜ë„ë¡ ë³´ìž¥í•˜ì—¬, íŠ¹ì • ìš”ì²­ì˜ ì§€ì—°ì´ ë‹¤ë¥¸ í´ë¼ì´ì–¸íŠ¸ì˜ ì„œë¹„ìŠ¤ì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•Šë„ë¡ í•©ë‹ˆë‹¤.

ê²½ìŸ ìƒíƒœ(Race Condition) ë°©ì§€: ì„¤ë¬¸ ë° íˆ¬í‘œ ë°ì´í„°ê°€ ì €ìž¥ëœ ì „ì—­ ì—°ê²° ë¦¬ìŠ¤íŠ¸ëŠ” ëª¨ë“  ìŠ¤ë ˆë“œê°€ ì ‘ê·¼í•˜ëŠ” **ê³µìœ  ìžì›(Shared Resource)**ìž…ë‹ˆë‹¤. ë‹¤ìˆ˜ì˜ ìŠ¤ë ˆë“œê°€ ì´ ê³µìœ  ìžì›ì„ ë™ì‹œì— ìˆ˜ì •í•  ê²½ìš° ë°ì´í„°ì˜ ì¼ê´€ì„±ì´ íŒŒê´´ë  ìˆ˜ ìžˆìœ¼ë¯€ë¡œ, pthread_mutex_të¥¼ ì‚¬ìš©í•œ ìƒí˜¸ ë°°ì œ(Mutual Exclusion) ë©”ì»¤ë‹ˆì¦˜ì„ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤. ë°ì´í„° êµ¬ì¡°ì— ì ‘ê·¼í•˜ëŠ” ëª¨ë“  ì½”ë“œ ì˜ì—­ì„ ìž„ê³„ êµ¬ì—­(Critical Section)ìœ¼ë¡œ ì„¤ì •í•˜ê³  mutex ìž ê¸ˆ(Lock)ìœ¼ë¡œ ë³´í˜¸í•¨ìœ¼ë¡œì¨, í•œ ë²ˆì— í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œë§Œì´ ë°ì´í„° ìˆ˜ì •ì„ ìˆ˜í–‰í•˜ë„ë¡ ë³´ìž¥í•˜ì—¬ ì›ìžì„±(Atomicity)ì„ í™•ë³´í•©ë‹ˆë‹¤.

ìŠ¤ë ˆë“œ ì•ˆì „ì„±(Thread-Safety) í™•ë³´: C í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ strtok í•¨ìˆ˜ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ ì •ì  ë²„í¼ë¥¼ ì‚¬ìš©í•˜ì—¬ ìž¬ì§„ìž…ì´ ë¶ˆê°€ëŠ¥(Non-reentrant)í•˜ë¯€ë¡œ, ë©€í‹°ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œ í˜¸ì¶œë  ì‹œ ì‹¬ê°í•œ ë°ì´í„° ì˜¤ì—¼ì„ ìœ ë°œí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ë¬¸ì œë¥¼ íšŒí”¼í•˜ê¸° ìœ„í•´, ìƒíƒœ ì €ìž¥ìš© í¬ì¸í„°ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì „ë‹¬í•˜ì—¬ ê° ìŠ¤ë ˆë“œê°€ ë…ë¦½ì ì¸ íŒŒì‹± ì»¨í…ìŠ¤íŠ¸ë¥¼ ìœ ì§€í•  ìˆ˜ ìžˆë„ë¡ í•˜ëŠ” ìŠ¤ë ˆë“œ ì•ˆì „ í•¨ìˆ˜ strtok_rë¡œ ì „ë©´ ëŒ€ì²´í•˜ì˜€ìŠµë‹ˆë‹¤.

2. ë°ì´í„° ì˜ì†ì„± ëª¨ë¸ (Data Persistence Model)
íŒŒì¼ ê¸°ë°˜ ì €ìž¥ì†Œ ì•„í‚¤í…ì²˜: ë³¸ ì‹œìŠ¤í…œì€ ë³„ë„ì˜ ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬ ì‹œìŠ¤í…œ(DBMS)ì— ëŒ€í•œ ì˜ì¡´ì„± ì—†ì´, í‘œì¤€ íŒŒì¼ ìž…ì¶œë ¥(I/O) APIë§Œì„ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ì˜ ì˜ì†ì„±ì„ êµ¬í˜„í•©ë‹ˆë‹¤. ê° ì„¤ë¬¸/íˆ¬í‘œ ì¸ìŠ¤í„´ìŠ¤ëŠ” ê³ ìœ  IDë¥¼ íŒŒì¼ëª…ìœ¼ë¡œ í•˜ëŠ” .txt íŒŒì¼ì— ì§ë ¬í™”(serialize)ë˜ì–´ ì €ìž¥ë©ë‹ˆë‹¤.

êµ¬ì¡°í™”ëœ íŒŒì¼ í¬ë§· ì„¤ê³„: ë°ì´í„°ì˜ íŒŒì‹± ë° ë³µì› íš¨ìœ¨ì„±ì„ ìœ„í•´ íŒŒì¼ ë‚´ ë°ì´í„°ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ëª…í™•í•œ êµ¬ì¡°ë¥¼ ë”°ë¦…ë‹ˆë‹¤.

[Line 1]: Title or Question String
[Line 2]: Status Code (0: Active, 1: Closed)
[...]: Option_String:Vote_Count
[Delimiter]: ---VOTERS---
[...]: Username_List

ì¦‰ì‹œ ë™ê¸°í™” ì „ëžµ: ì‚¬ìš©ìžì˜ ì‘ë‹µìœ¼ë¡œ ì¸í•´ ë©”ëª¨ë¦¬ ìƒì˜ ë°ì´í„°ê°€ ë³€ê²½ë  ê²½ìš°, í•´ë‹¹ ë³€ê²½ ì‚¬í•­ì€ ì¦‰ì‹œ íŒŒì¼ì— ë°˜ì˜ë©ë‹ˆë‹¤. ì´ëŠ” íŒŒì¼ ì „ì²´ë¥¼ ìƒˆë¡œ ë®ì–´ì“°ëŠ”(Overwrite) ë°©ì‹ìœ¼ë¡œ êµ¬í˜„ë˜ì–´, ë©”ëª¨ë¦¬ì™€ ìŠ¤í† ë¦¬ì§€ ê°„ì˜ ë°ì´í„° ì¼ê´€ì„±ì„ ìœ ì§€í•˜ê³  ì˜ˆê¸°ì¹˜ ì•Šì€ ì„œë²„ ì¢…ë£Œ ì‹œ ë°œìƒí•  ìˆ˜ ìžˆëŠ” ë°ì´í„° ìœ ì‹¤ì„ ìµœì†Œí™”í•©ë‹ˆë‹¤.

3. ì‚¬ìš©ìž ì •ì˜ í†µì‹  í”„ë¡œí† ì½œ
í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ê°„ì˜ ëª¨ë“  ì–´í”Œë¦¬ì¼€ì´ì…˜ ê³„ì¸µ í†µì‹ ì€ | ë¬¸ìžë¥¼ êµ¬ë¶„ìž(Delimiter)ë¡œ ì‚¬ìš©í•˜ëŠ” í…ìŠ¤íŠ¸ ê¸°ë°˜ í”„ë¡œí† ì½œë¡œ í‘œì¤€í™”ë˜ì—ˆìŠµë‹ˆë‹¤.

ìš”ì²­ í˜•ì‹: COMMAND|PARAMETER_1|PARAMETER_2|...|USERNAME

ì´ëŸ¬í•œ í”„ë¡œí† ì½œ ê¸°ë°˜ì˜ ì„¤ê³„ëŠ” í–¥í›„ ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€ ì‹œ, ì‹ ê·œ ëª…ë ¹ì–´ì™€ íŒŒë¼ë¯¸í„° êµ¬ì¡°ë¥¼ ì •ì˜í•˜ëŠ” ê²ƒë§Œìœ¼ë¡œ ì‹œìŠ¤í…œì„ ìš©ì´í•˜ê²Œ í™•ìž¥í•  ìˆ˜ ìžˆëŠ” ìœ ì—°ì„±ì„ ì œê³µí•©ë‹ˆë‹¤.

ðŸš€ ë¹Œë“œ ë° ì‹¤í–‰ ë°©ë²•
ì‚¬ì „ ìš”êµ¬ì‚¬í•­
gcc ì»´íŒŒì¼ëŸ¬

make ë¹Œë“œ ìžë™í™” ìœ í‹¸ë¦¬í‹°

pthread ë¼ì´ë¸ŒëŸ¬ë¦¬

1. ì†ŒìŠ¤ ì½”ë“œ ì»´íŒŒì¼
í”„ë¡œì íŠ¸ì˜ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì—ì„œ ë‹¤ìŒì˜ make ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´, Makefileì— ì •ì˜ëœ ê·œì¹™ì— ë”°ë¼ src/server/ì™€ src/client/ ë””ë ‰í† ë¦¬ ë‚´ì— ê°ê° ì‹¤í–‰ íŒŒì¼(server, client)ì´ ìƒì„±ë©ë‹ˆë‹¤.

make

2. ì„œë²„ ì‹¤í–‰
ìƒˆë¡œìš´ í„°ë¯¸ë„ ì„¸ì…˜ì„ ì—´ê³ , ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ í†µí•´ ì„œë²„ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

./src/server/server

ì„œë²„ê°€ ì •ìƒì ìœ¼ë¡œ êµ¬ë™ë˜ë©´, >> Server listening on port 9000 ë©”ì‹œì§€ê°€ ì½˜ì†”ì— ì¶œë ¥ë©ë‹ˆë‹¤.

3. í´ë¼ì´ì–¸íŠ¸ ì‹¤í–‰
ì„œë²„ ì‹¤í–‰ê³¼ ë³„ê°œì˜ í„°ë¯¸ë„ ì„¸ì…˜ì—ì„œ, ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ í†µí•´ í´ë¼ì´ì–¸íŠ¸ í”„ë¡œê·¸ëž¨ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.

./src/client/client

í´ë¼ì´ì–¸íŠ¸ í”„ë¡œê·¸ëž¨ì´ ì‹œìž‘ë˜ë©´ ì‚¬ìš©ìž ì´ë¦„ ìž…ë ¥ì„ ìœ„í•œ í”„ë¡¬í”„íŠ¸ê°€ í‘œì‹œë˜ë©°, ì´ë¦„ ìž…ë ¥ ì™„ë£Œ í›„ ë©”ë‰´ ì‹œìŠ¤í…œì„ í†µí•´ ì„œë²„ì˜ ê¸°ëŠ¥ì„ ì´ìš©í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ë‹¤ì¤‘ ì ‘ì† í™˜ê²½ì„ ì‹œë®¬ë ˆì´ì…˜í•˜ê¸° ìœ„í•´ ë³µìˆ˜ì˜ í´ë¼ì´ì–¸íŠ¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

ðŸ“‚ ë””ë ‰í† ë¦¬ êµ¬ì¡°
.
â”œâ”€â”€ include
â”‚   â””â”€â”€ common.h          # í´ë¼ì´ì–¸íŠ¸-ì„œë²„ ê³µìš© ë°ì´í„° êµ¬ì¡°ì²´ ë° ìƒìˆ˜ ì •ì˜
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ client
â”‚   â”‚   â””â”€â”€ client_main.c   # í´ë¼ì´ì–¸íŠ¸ í”„ë¡œê·¸ëž¨ì˜ ì£¼ìš” ë¡œì§
â”‚   â””â”€â”€ server
â”‚       â””â”€â”€ server_main.c   # ì„œë²„ í”„ë¡œê·¸ëž¨ì˜ ì£¼ìš” ë¡œì§
â”œâ”€â”€ data                    # ì„¤ë¬¸ ë° íˆ¬í‘œ ë°ì´í„° íŒŒì¼ ì €ìž¥ ë””ë ‰í† ë¦¬ (ìžë™ ìƒì„±)
â”‚   â”œâ”€â”€ survey
â”‚   â””â”€â”€ vote
â”œâ”€â”€ Makefile                # ë¹Œë“œ ìžë™í™”ë¥¼ ìœ„í•œ Makefile
â””â”€â”€ README.md

Network-based Survey and Polling System in C
This document provides the technical specifications for a console-based survey and polling system implemented in C, utilizing the TCP/IP socket API. The core architecture of this system is multithreading to support concurrent client connections and interactions, with primary objectives focused on ensuring data management stability and providing user-centric functionalities.

ðŸ“‹ Core Features
Real-time Survey and Poll Creation and Participation: Users can dynamically create survey or poll items through the system, and other users can participate in these items in real-time to record their opinions.

Multi-user Concurrency Support via Multithreading: A multithreaded server, built upon the POSIX Threads (pthread) library, is implemented to enable stable parallel processing of requests from numerous concurrently connected clients.

Data Persistence via File System: All metadata, response results, and participant information for every survey and poll item are permanently recorded in text files within the server's local file system. This ensures that all data is consistently restored upon a server restart.

User-Friendly, Title-based ID Generation: Instead of mechanical identifiers like survey-001, the system dynamically generates human-readable IDs based on user-input titles.

Item-specific Status Management: Each survey and poll item possesses an explicit state of 'Active' or 'Closed', allowing an administrator to deactivate participation for a specific item, effectively closing it.

Username-based Duplicate Participation Prevention: Each client is identified by a unique username, and the server maintains a list of participants for each item. This mechanism prevents the same user from submitting multiple responses, thereby ensuring data integrity.

ðŸ”§ Detailed Technical Features
This project was designed by applying the following computer science principles to ensure system stability and scalability, moving beyond simple functional implementation.

1. Concurrency and Synchronization
Independent Request Processing Model: The main thread waits for client connections in a blocking state via accept(). Upon establishing a connection, it immediately invokes pthread_create() to spawn a new worker thread dedicated to handling communication with that client. This "One-Thread-Per-Client" model guarantees that each client's request is processed within an independent thread of execution, preventing delays from one request from affecting the service for other clients.

Race Condition Prevention: The global linked list storing survey and poll data is a Shared Resource accessible by all threads. To prevent data corruption from simultaneous modifications by multiple threads, a mutual exclusion mechanism using pthread_mutex_t is implemented. All code segments that access the data structure are defined as a Critical Section and are protected by a mutex lock, which ensures atomicity by allowing only one thread to perform data modifications at a time.

Ensuring Thread-Safety: The strtok function from the C standard library is non-reentrant due to its use of an internal static buffer, which can cause severe data corruption when called in a multithreaded environment. To circumvent this issue, it has been entirely replaced with strtok_r, a thread-safe alternative that maintains each thread's parsing context independently by explicitly passing a state-saving pointer.

2. Data Persistence Model
File-based Storage Architecture: The system implements data persistence using only standard file I/O APIs, without dependency on an external Database Management System (DBMS). Each survey or poll instance is serialized and stored in a .txt file, named with its unique ID.

Structured File Format Design: For efficiency in data parsing and restoration, the data within each file adheres to the following clear structure:

[Line 1]: Title or Question String
[Line 2]: Status Code (0: Active, 1: Closed)
[...]: Option_String:Vote_Count
[Delimiter]: ---VOTERS---
[...]: Username_List

Immediate Synchronization Strategy: When data in memory is altered due to a user's response, the changes are immediately reflected in the corresponding file. This is implemented by overwriting the entire file, which maintains data consistency between memory and storage and minimizes data loss in the event of an unexpected server shutdown.

3. Custom Communication Protocol
All application-layer communication between the client and server is standardized through a text-based protocol using the | character as a delimiter.

Request Format: COMMAND|PARAMETER_1|PARAMETER_2|...|USERNAME

This protocol-based design provides the flexibility to easily extend the system with new functionalities by simply defining new commands and parameter structures.

ðŸš€ Build and Execution
Prerequisites
gcc compiler

make build automation utility

pthread library

1. Compile Source Code
From the project's root directory, execute the make command. This will generate executable files (server, client) in the src/server/ and src/client/ directories, respectively, according to the rules defined in the Makefile.

make

2. Run the Server
Open a new terminal session and execute the following command to run the server process.

./src/server/server

Upon successful startup, the message >> Server listening on port 9000 will be displayed on the console.

3. Run the Client
In a separate terminal session, execute the following command to run the client program.

./src/client/client

When the client program starts, a prompt will appear for username input. After entering a name, you can interact with the system through the menu. Multiple client instances can be run to simulate a multi-user environment.

ðŸ“‚ Directory Structure
.
â”œâ”€â”€ include
â”‚   â””â”€â”€ common.h          # Common data structures and constants for client-server
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ client
â”‚   â”‚   â””â”€â”€ client_main.c   # Main logic for the client program
â”‚   â””â”€â”€ server
â”‚       â””â”€â”€ server_main.c   # Main logic for the server program
â”œâ”€â”€ data                    # Directory for storing survey and poll data files (auto-generated)
â”‚   â”œâ”€â”€ survey
â”‚   â””â”€â”€ vote
â”œâ”€â”€ Makefile                # Makefile for build automation
â””â”€â”€ README.md
